{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://certeus.ai/schemas/provenance_receipt_v1.json",
  "title": "Provenance Receipt v1",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "case_id": {"type": "string", "minLength": 1},
    "receipt_id": {"type": "string", "format": "uuid"},
    "inputs": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "lexlog_rule_version": {"type": "string", "minLength": 1},
        "assumptions_hash": {"type": "string", "pattern": "^[0-9a-fA-F]{64}$"},
        "question_hash": {"type": "string", "pattern": "^[0-9a-fA-F]{64}$"}
      },
      "required": ["lexlog_rule_version", "assumptions_hash", "question_hash"]
    },
    "solvers": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "status": {"type": "string", "enum": ["ok", "fail", "timeout"]},
          "runtime_ms": {"type": "integer", "minimum": 0}
        },
        "required": ["status"]
      }
    },
    "mismatch": {"type": "boolean"},
    "final_hash": {"type": "string", "pattern": "^[0-9a-fA-F]{64}$"},
    "timestamp": {"type": "string", "format": "date-time"}
  },
  "required": [
    "case_id",
    "receipt_id",
    "inputs",
    "solvers",
    "mismatch",
    "final_hash",
    "timestamp"
  ]
}

